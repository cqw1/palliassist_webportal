{% extends "app/layout.html" %}

{% block content %}
<div class="">
    <h3>{{title}}<small><!--Subtext for header--></small></h3>
    <hr>
</div>

<div class="row">

    <div class="col-xs-12 col-md-4">
        <!-- Unread Messages Panel -->
        <div class="panel panel-info">
            <div class="panel-heading">
                <h3 class="panel-title">Unread Messages</h3>
            </div>

            <div class="list-group">
                {% for unread_patient in unread_patients %}
                <a href="{% url 'patient-profile' %}?pk={{unread_patient.pk}}#messages" class="list-group-item">{{unread_patient.full_name}}<span class="badge">{{unread_patient.unread_messages}}</span></a>
                {% endfor %}
            </div>
        </div>
    </div>

    <div class="col-xs-12 col-md-4">
        <!-- Missed Medication Panel -->
        <div class="panel panel-danger">
            <div class="panel-heading">
                <h3 class="panel-title">Missed Medication</h3>
            </div>

            <div class="list-group">
                <a href="#" class="list-group-item">Billy Bob<span class="badge">78</span></a>
                <a href="#" class="list-group-item">John Doe<span class="badge">3</span></a>
                <a href="#" class="list-group-item">Jane Doe<span class="badge">10</span></a>
                <a href="#" class="list-group-item">John Jingleheimerschmidt<span class="badge">101</span></a>
            </div>
        </div>
    </div>

    <div class="col-xs-12 col-md-4">
    <!-- ESAS Symptom >= 7 Panel -->
        <div class="panel panel-warning">
            <div class="panel-heading">
                <h3 class="panel-title">ESAS Surveys</h3>
            </div>

            <div class="list-group">
                {% for patient, esas_alert in patient_esas_alert.items %}

                <a class="list-group-item patient-header" href="#{{patient.pk}}-esas-alerts-collapse" role="button" data-toggle="collapse">
                    <span class="glyphicon glyphicon-chevron-right dashboard-chevron-right" aria-hidden="true"></span>
                    {{patient.full_name}}
                    <span class="badge">{{esas_alert|length}}</span>
                </a>

                <div id="{{patient.pk}}-esas-alerts-collapse" class="collapse">
                    {% for esas, alert in esas_alert.items %}
                    <a id="{{alert.pk}}" href="{% url 'patient-profile' %}?pk={{patient.pk}}#esas/{{esas.pk}}" class="list-group-item nested-list-group-item dashboard-alert">
                        {{esas.created_date|date:"SHORT_DATE_FORMAT"}} {{esas.created_date|time:"H:i"}}
                    </a>
                    {% endfor %}
                </div>

                {% endfor %}
            </div>
        </div>
    </div>

    <div class="col-xs-12 col-md-4">
    </div>

</div>

{% endblock %}

{% block scripts %}

{% load staticfiles %}

<script src="{% static 'app/scripts/dashboard.js' %}"></script>

{% endblock %}
